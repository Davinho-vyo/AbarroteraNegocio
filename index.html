<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Tiendita</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: #F3F4F6;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const TiendaApp = () => {
            const [currentView, setCurrentView] = useState('main');
            const [ventas, setVentas] = useState([]);
            const [inventario, setInventario] = useState([
                { id: 1, nombre: 'Coca-Cola 600ml', cantidad: 24, costo: 12, precio: 18, vencimiento: '2025-08-15', minimo: 10 },
                { id: 2, nombre: 'Sabritas Original', cantidad: 15, costo: 8, precio: 15, vencimiento: '2025-07-20', minimo: 5 },
                { id: 3, nombre: 'Pan Bimbo Grande', cantidad: 8, costo: 25, precio: 35, vencimiento: '2025-06-25', minimo: 6 },
                { id: 4, nombre: 'Leche Lala 1L', cantidad: 12, costo: 18, precio: 25, vencimiento: '2025-06-20', minimo: 8 },
                { id: 5, nombre: 'Huevos San Juan', cantidad: 30, costo: 35, precio: 50, vencimiento: '2025-07-01', minimo: 12 }
            ]);
            const [ventaActual, setVentaActual] = useState({ producto: '', cantidad: 1, precio: 0 });
            const [calculadora, setCalculadora] = useState({ costo: '', precio: '' });

            // Funciones auxiliares
            const getDiasVencimiento = (fecha) => {
                const hoy = new Date();
                const vencimiento = new Date(fecha);
                const diferencia = Math.ceil((vencimiento - hoy) / (1000 * 60 * 60 * 24));
                return diferencia;
            };

            const getColorVencimiento = (dias) => {
                if (dias > 30) return 'bg-green-100 text-green-800';
                if (dias > 15) return 'bg-yellow-100 text-yellow-800';
                return 'bg-red-100 text-red-800';
            };

            const totalVentasHoy = ventas.reduce((total, venta) => total + (venta.cantidad * venta.precio), 0);
            const totalCostosHoy = ventas.reduce((total, venta) => {
                const producto = inventario.find(p => p.nombre === venta.producto);
                return total + (venta.cantidad * (producto?.costo || 0));
            }, 0);
            const gananciasHoy = totalVentasHoy - totalCostosHoy;

            // Componente de navegación
            const HeaderNav = ({ title, onBack }) => (
                <div className="flex items-center mb-6 bg-white p-4 rounded-2xl shadow-lg">
                    <button
                        onClick={onBack}
                        className="bg-gray-600 hover:bg-gray-700 text-white p-3 rounded-full mr-4"
                    >
                        ←
                    </button>
                    <h1 className="text-2xl font-bold text-gray-900">{title}</h1>
                </div>
            );

            // Pantalla Principal
            const MainScreen = () => (
                <div className="min-h-screen bg-blue-50 p-4">
                    <div className="max-w-md mx-auto">
                        <div className="text-center mb-8">
                            <h1 className="text-3xl font-bold text-blue-900 mb-2">🏪 Mi Tiendita</h1>
                            <p className="text-lg text-blue-700">¡Hola Doña María! ¿Qué vamos a hacer hoy?</p>
                        </div>

                        <div className="space-y-6">
                            <button
                                onClick={() => setCurrentView('ventas')}
                                className="w-full bg-green-600 hover:bg-green-700 text-white p-6 rounded-2xl shadow-xl flex items-center justify-center space-x-4 transform hover:scale-105 transition-all"
                            >
                                <span className="text-4xl">🛒</span>
                                <span className="text-2xl font-bold">Registrar Venta</span>
                            </button>

                            <button
                                onClick={() => setCurrentView('inventario')}
                                className="w-full bg-blue-600 hover:bg-blue-700 text-white p-6 rounded-2xl shadow-xl flex items-center justify-center space-x-4 transform hover:scale-105 transition-all"
                            >
                                <span className="text-4xl">📦</span>
                                <span className="text-2xl font-bold">Ver mi Inventario</span>
                            </button>

                            <button
                                onClick={() => setCurrentView('compras')}
                                className="w-full bg-purple-600 hover:bg-purple-700 text-white p-6 rounded-2xl shadow-xl flex items-center justify-center space-x-4 transform hover:scale-105 transition-all"
                            >
                                <span className="text-4xl">📋</span>
                                <span className="text-2xl font-bold">¿Qué debo comprar?</span>
                            </button>

                            <button
                                onClick={() => setCurrentView('dinero')}
                                className="w-full bg-yellow-600 hover:bg-yellow-700 text-white p-6 rounded-2xl shadow-xl flex items-center justify-center space-x-4 transform hover:scale-105 transition-all"
                            >
                                <span className="text-4xl">💰</span>
                                <span className="text-2xl font-bold">Mi Dinero del Día</span>
                            </button>
                        </div>

                        <div className="mt-8 bg-white rounded-2xl p-4 shadow-lg">
                            <h3 className="text-xl font-bold text-gray-800 mb-3">📊 Resumen de Hoy</h3>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <p className="text-sm text-gray-600">Ventas</p>
                                    <p className="text-lg text-green-600 font-bold">${totalVentasHoy.toFixed(2)}</p>
                                </div>
                                <div>
                                    <p className="text-sm text-gray-600">Ganancias</p>
                                    <p className="text-lg text-blue-600 font-bold">${gananciasHoy.toFixed(2)}</p>
                                </div>
                            </div>
                            <p className="text-sm text-gray-600 mt-2">
                                Productos en inventario: {inventario.length} | Ventas: {ventas.length}
                            </p>
                        </div>
                    </div>
                </div>
            );

            // Pantalla de Ventas
            const VentasScreen = () => (
                <div className="min-h-screen bg-green-50 p-4">
                    <div className="max-w-md mx-auto">
                        <HeaderNav title="🛒 Registrar Venta" onBack={() => setCurrentView('main')} />

                        <div className="space-y-6">
                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <label className="text-xl font-bold text-gray-800 mb-4 block">¿Qué vendiste?</label>
                                <select
                                    value={ventaActual.producto}
                                    onChange={(e) => {
                                        const producto = inventario.find(p => p.id === parseInt(e.target.value));
                                        setVentaActual({
                                            ...ventaActual,
                                            producto: e.target.value,
                                            precio: producto ? producto.precio : 0
                                        });
                                    }}
                                    className="w-full p-4 text-lg border-2 border-gray-300 rounded-xl focus:border-green-500"
                                >
                                    <option value="">Selecciona un producto</option>
                                    {inventario.map(producto => (
                                        <option key={producto.id} value={producto.id}>
                                            {producto.nombre} - ${producto.precio}
                                        </option>
                                    ))}
                                </select>
                            </div>

                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <label className="text-xl font-bold text-gray-800 mb-4 block">¿Cuántos vendiste?</label>
                                <div className="flex items-center justify-center space-x-4">
                                    <button
                                        onClick={() => setVentaActual({...ventaActual, cantidad: Math.max(1, ventaActual.cantidad - 1)})}
                                        className="bg-red-500 hover:bg-red-600 text-white p-4 rounded-full text-2xl"
                                    >
                                        -
                                    </button>
                                    <span className="text-4xl font-bold text-gray-800 w-20 text-center">{ventaActual.cantidad}</span>
                                    <button
                                        onClick={() => setVentaActual({...ventaActual, cantidad: ventaActual.cantidad + 1})}
                                        className="bg-green-500 hover:bg-green-600 text-white p-4 rounded-full text-2xl"
                                    >
                                        +
                                    </button>
                                </div>
                            </div>

                            <div className="bg-yellow-100 rounded-2xl p-6 shadow-lg">
                                <h3 className="text-xl font-bold text-gray-800 mb-2">Total de la venta:</h3>
                                <p className="text-4xl font-bold text-green-600">${(ventaActual.cantidad * ventaActual.precio).toFixed(2)}</p>
                            </div>

                            <button
                                onClick={() => {
                                    if (ventaActual.producto) {
                                        const producto = inventario.find(p => p.id === parseInt(ventaActual.producto));
                                        const nuevaVenta = {
                                            id: Date.now(),
                                            producto: producto.nombre,
                                            cantidad: ventaActual.cantidad,
                                            precio: ventaActual.precio,
                                            fecha: new Date().toLocaleString()
                                        };
                                        setVentas([...ventas, nuevaVenta]);
                                        setVentaActual({ producto: '', cantidad: 1, precio: 0 });
                                        alert('¡Venta registrada con éxito! 🎉');
                                    }
                                }}
                                disabled={!ventaActual.producto}
                                className="w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white p-6 rounded-2xl shadow-xl text-2xl font-bold"
                            >
                                ✓ Registrar Venta
                            </button>
                        </div>

                        <div className="mt-8 bg-white rounded-2xl p-4 shadow-lg">
                            <h3 className="text-xl font-bold text-gray-800 mb-4">Ventas de Hoy</h3>
                            {ventas.length === 0 ? (
                                <p className="text-gray-600">No hay ventas registradas hoy</p>
                            ) : (
                                <div className="space-y-2 max-h-40 overflow-y-auto">
                                    {ventas.map(venta => (
                                        <div key={venta.id} className="flex justify-between p-2 border-b">
                                            <span>{venta.cantidad}x {venta.producto}</span>
                                            <span className="font-bold">${(venta.cantidad * venta.precio).toFixed(2)}</span>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );

            // Pantalla de Inventario
            const InventarioScreen = () => (
                <div className="min-h-screen bg-blue-50 p-4">
                    <div className="max-w-md mx-auto">
                        <HeaderNav title="📦 Mi Inventario" onBack={() => setCurrentView('main')} />

                        <div className="space-y-4">
                            {inventario.map(producto => {
                                const dias = getDiasVencimiento(producto.vencimiento);
                                return (
                                    <div key={producto.id} className="bg-white rounded-2xl p-4 shadow-lg">
                                        <div className="flex justify-between items-start mb-2">
                                            <h3 className="text-lg font-bold text-gray-800">{producto.nombre}</h3>
                                            <span className={`px-3 py-1 rounded-full text-sm font-bold ${getColorVencimiento(dias)}`}>
                                                {dias > 0 ? `${dias} días` : 'Vencido'}
                                            </span>
                                        </div>
                                        
                                        <div className="grid grid-cols-2 gap-4 text-sm">
                                            <div>
                                                <p className="text-gray-600">Cantidad:</p>
                                                <p className="text-2xl font-bold text-blue-600">{producto.cantidad}</p>
                                            </div>
                                            <div>
                                                <p className="text-gray-600">Precio:</p>
                                                <p className="text-2xl font-bold text-green-600">${producto.precio}</p>
                                            </div>
                                        </div>

                                        {dias <= 15 && dias > 0 && (
                                            <div className="mt-3 p-2 bg-yellow-100 rounded-lg">
                                                <p className="text-yellow-800 text-sm font-semibold">
                                                    ⚠️ ¡Próximo a vencer! Considera hacer promoción
                                                </p>
                                            </div>
                                        )}
                                        
                                        {dias <= 0 && (
                                            <div className="mt-3 p-2 bg-red-100 rounded-lg">
                                                <p className="text-red-800 text-sm font-semibold">
                                                    🚨 ¡Producto vencido! Retira de la venta
                                                </p>
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );

            // Pantalla de Compras
            const ComprasScreen = () => {
                const productosPocos = inventario.filter(p => p.cantidad <= p.minimo);
                const productosVencer = inventario.filter(p => getDiasVencimiento(p.vencimiento) <= 15 && getDiasVencimiento(p.vencimiento) > 0);

                return (
                    <div className="min-h-screen bg-purple-50 p-4">
                        <div className="max-w-md mx-auto">
                            <HeaderNav title="📋 ¿Qué debo comprar?" onBack={() => setCurrentView('main')} />

                            <div className="space-y-6">
                                <div className="bg-white rounded-2xl p-6 shadow-lg">
                                    <h3 className="text-xl font-bold text-red-600 mb-4 flex items-center">
                                        ⚠️ Productos con poca existencia
                                    </h3>
                                    {productosPocos.length === 0 ? (
                                        <p className="text-gray-600">¡Perfecto! Todos tus productos tienen buena existencia</p>
                                    ) : (
                                        <div className="space-y-3">
                                            {productosPocos.map(producto => (
                                                <div key={producto.id} className="flex justify-between items-center p-3 bg-red-50 rounded-lg">
                                                    <div>
                                                        <p className="font-semibold text-gray-800">{producto.nombre}</p>
                                                        <p className="text-sm text-gray-600">Quedan solo {producto.cantidad}</p>
                                                    </div>
                                                    <span className="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                                        ¡Comprar!
                                                    </span>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                <div className="bg-white rounded-2xl p-6 shadow-lg">
                                    <h3 className="text-xl font-bold text-yellow-600 mb-4 flex items-center">
                                        ⏰ Productos próximos a vencer
                                    </h3>
                                    {productosVencer.length === 0 ? (
                                        <p className="text-gray-600">¡Excelente! No tienes productos próximos a vencer</p>
                                    ) : (
                                        <div className="space-y-3">
                                            {productosVencer.map(producto => (
                                                <div key={producto.id} className="flex justify-between items-center p-3 bg-yellow-50 rounded-lg">
                                                    <div>
                                                        <p className="font-semibold text-gray-800">{producto.nombre}</p>
                                                        <p className="text-sm text-gray-600">Vence en {getDiasVencimiento(producto.vencimiento)} días</p>
                                                    </div>
                                                    <span className="bg-yellow-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                                        ¡Promoción!
                                                    </span>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                <div className="bg-green-100 rounded-2xl p-6 shadow-lg">
                                    <h3 className="text-lg font-bold text-green-800 mb-2">💡 Consejo de Doña Carmen:</h3>
                                    <p className="text-green-700">
                                        "Mija, siempre ten productos básicos como refrescos, pan y leche. 
                                        ¡Son los que más se venden todos los días!"
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // Pantalla de Dinero
            const DineroScreen = () => (
                <div className="min-h-screen bg-yellow-50 p-4">
                    <div className="max-w-md mx-auto">
                        <HeaderNav title="💰 Mi Dinero del Día" onBack={() => setCurrentView('main')} />

                        <div className="space-y-6">
                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <h3 className="text-xl font-bold text-gray-800 mb-4">Resumen de Hoy</h3>
                                <div className="space-y-3">
                                    <div className="flex justify-between">
                                        <span className="text-lg">Total Vendido:</span>
                                        <span className="text-2xl font-bold text-green-600">${totalVentasHoy.toFixed(2)}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-lg">Ganancias:</span>
                                        <span className="text-2xl font-bold text-blue-600">${gananciasHoy.toFixed(2)}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-lg">Número de Ventas:</span>
                                        <span className="text-xl font-semibold">{ventas.length}</span>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <h3 className="text-xl font-bold text-gray-800 mb-4">Calculadora de Ganancias</h3>
                                
                                <div className="space-y-4">
                                    <div>
                                        <label className="text-lg font-semibold text-gray-700 mb-2 block">¿Cuánto te costó?</label>
                                        <input
                                            type="number"
                                            value={calculadora.costo}
                                            onChange={(e) => setCalculadora({...calculadora, costo: e.target.value})}
                                            className="w-full p-4 text-xl border-2 border-gray-300 rounded-xl focus:border-yellow-500"
                                            placeholder="Ejemplo: 15"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="text-lg font-semibold text-gray-700 mb-2 block">¿A cuánto lo vendes?</label>
                                        <input
                                            type="number"
                                            value={calculadora.precio}
                                            onChange={(e) => setCalculadora({...calculadora, precio: e.target.value})}
                                            className="w-full p-4 text-xl border-2 border-gray-300 rounded-xl focus:border-yellow-500"
                                            placeholder="Ejemplo: 25"
                                        />
                                    </div>

                                    {calculadora.costo && calculadora.precio && (
                                        <div className="bg-green-100 rounded-xl p-4">
                                            <h4 className="text-lg font-bold text-gray-800 mb-2">Tu ganancia:</h4>
                                            <p className="text-3xl font-bold text-green-600">
                                                ${(parseFloat(calculadora.precio) - parseFloat(calculadora.costo)).toFixed(2)}
                                            </p>
                                            <p className="text-sm text-gray-600 mt-1">
                                                Margen: {(((parseFloat(calculadora.precio) - parseFloat(calculadora.costo)) / parseFloat(calculadora.precio)) * 100).toFixed(1)}%
                                            </p>
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div className="bg-blue-100 rounded-2xl p-6 shadow-lg">
                                <h3 className="text-lg font-bold text-blue-800 mb-2">💰 Consejo de Doña Carmen:</h3>
                                <p className="text-blue-700">
                                    "Mija, para productos que se venden mucho, una ganancia del 30-50% está bien. 
                                    ¡Para productos especiales puedes ganar hasta 100%!"
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Renderizar la pantalla actual
            const renderCurrentView = () => {
                switch (currentView) {
                    case 'ventas':
                        return <VentasScreen />;
                    case 'inventario':
                        return <InventarioScreen />;
                    case 'compras':
                        return <ComprasScreen />;
                    case 'dinero':
                        return <DineroScreen />;
                    default:
                        return <MainScreen />;
                }
            };

            return renderCurrentView();
        };

        ReactDOM.render(<TiendaApp />, document.getElementById('root'));
    </script>
</body>
</html>
