onClick={limpiarTodosLosDatos}
                                className="mt-3 text-xs text-gray-400 hover:text-red-500 transition-colors"
                            >
                                üóëÔ∏è Limpiar todos los datos
                            </button>
                        </div>
                    </div>
                </div>
            );

            // Pantalla de Ventas
            const VentasScreen = () => (
                <div className="min-h-screen bg-green-50 p-4">
                    <div className="max-w-md mx-auto">
                        <HeaderNav title="üõí Registrar Venta" onBack={() => setCurrentView('main')} />

                        <div className="space-y-6">
                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <label className="text-xl font-bold text-gray-800 mb-4 block">¬øQu√© vendiste?</label>
                                <select
                                    value={ventaActual.producto}
                                    onChange={(e) => {
                                        const producto = inventario.find(p => p.id === parseInt(e.target.value));
                                        setVentaActual({
                                            ...ventaActual,
                                            producto: e.target.value,
                                            precio: producto ? producto.precio : 0
                                        });
                                    }}
                                    className="w-full p-4 text-lg border-2 border-gray-300 rounded-xl focus:border-green-500"
                                >
                                    <option value="">Selecciona un producto</option>
                                    {inventario.filter(p => p.cantidad > 0).map(producto => (
                                        <option key={producto.id} value={producto.id}>
                                            {producto.nombre} - ${producto.precio} (Stock: {producto.cantidad})
                                        </option>
                                    ))}
                                </select>
                            </div>

                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <label className="text-xl font-bold text-gray-800 mb-4 block">¬øCu√°ntos vendiste?</label>
                                <div className="flex items-center justify-center space-x-4">
                                    <button
                                        onClick={() => setVentaActual({...ventaActual, cantidad: Math.max(1, ventaActual.cantidad - 1)})}
                                        className="bg-red-500 hover:bg-red-600 text-white p-4 rounded-full text-2xl"
                                    >
                                        -
                                    </button>
                                    <span className="text-4xl font-bold text-gray-800 w-20 text-center">{ventaActual.cantidad}</span>
                                    <button
                                        onClick={() => {
                                            const producto = inventario.find(p => p.id === parseInt(ventaActual.producto));
                                            const maxCantidad = producto ? producto.cantidad : 1;
                                            setVentaActual({
                                                ...ventaActual, 
                                                cantidad: Math.min(maxCantidad, ventaActual.cantidad + 1)
                                            });
                                        }}
                                        className="bg-green-500 hover:bg-green-600 text-white p-4 rounded-full text-2xl"
                                        disabled={(() => {
                                            const producto = inventario.find(p => p.id === parseInt(ventaActual.producto));
                                            return ventaActual.cantidad >= (producto?.cantidad || 0);
                                        })()}
                                    >
                                        +
                                    </button>
                                </div>
                                
                                {ventaActual.producto && (
                                    (() => {
                                        const producto = inventario.find(p => p.id === parseInt(ventaActual.producto));
                                        return producto && ventaActual.cantidad >= producto.cantidad ? (
                                            <div className="mt-3 p-3 bg-red-100 rounded-lg">
                                                <p className="text-red-800 text-sm font-semibold text-center">
                                                    ‚ö†Ô∏è ¬°No puedes vender m√°s de lo que tienes en stock!
                                                </p>
                                            </div>
                                        ) : null;
                                    })()
                                )}
                            </div>

                            <div className="bg-yellow-100 rounded-2xl p-6 shadow-lg">
                                <h3 className="text-xl font-bold text-gray-800 mb-2">Total de la venta:</h3>
                                <p className="text-4xl font-bold text-green-600 mb-2">${(ventaActual.cantidad * ventaActual.precio).toFixed(2)}</p>
                                {ventaActual.producto && (
                                    <div className="text-sm text-gray-600">
                                        <p>{ventaActual.cantidad} √ó ${ventaActual.precio} = ${(ventaActual.cantidad * ventaActual.precio).toFixed(2)}</p>
                                        {(() => {
                                            const producto = inventario.find(p => p.id === parseInt(ventaActual.producto));
                                            const ganancia = producto ? (ventaActual.precio - producto.costo) * ventaActual.cantidad : 0;
                                            return <p className="text-green-600 font-semibold">Ganancia: ${ganancia.toFixed(2)}</p>;
                                        })()}
                                    </div>
                                )}
                            </div>

                            <button
                                onClick={() => {
                                    if (ventaActual.producto) {
                                        const producto = inventario.find(p => p.id === parseInt(ventaActual.producto));
                                        if (producto && ventaActual.cantidad <= producto.cantidad) {
                                            const nuevaVenta = {
                                                id: Date.now(),
                                                producto: producto.nombre,
                                                cantidad: ventaActual.cantidad,
                                                precio: ventaActual.precio,
                                                fecha: new Date().toISOString()
                                            };
                                            setVentas([...ventas, nuevaVenta]);
                                            
                                            // Actualizar inventario
                                            setInventario(inventario.map(p => 
                                                p.id === parseInt(ventaActual.producto) 
                                                    ? {...p, cantidad: p.cantidad - ventaActual.cantidad}
                                                    : p
                                            ));
                                            
                                            setVentaActual({ producto: '', cantidad: 1, precio: 0 });
                                            alert('¬°Venta registrada con √©xito! üéâ');
                                        } else {
                                            alert('‚ùå No tienes suficiente stock para esta venta');
                                        }
                                    }
                                }}
                                disabled={!ventaActual.producto || ventaActual.cantidad <= 0}
                                className="w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white p-6 rounded-2xl shadow-xl text-2xl font-bold"
                            >
                                ‚úì Registrar Venta
                            </button>
                        </div>

                        <div className="mt-8 bg-white rounded-2xl p-4 shadow-lg">
                            <h3 className="text-xl font-bold text-gray-800 mb-4">Ventas de Hoy ({ventas.length})</h3>
                            {ventas.length === 0 ? (
                                <p className="text-gray-600 text-center py-4">No hay ventas registradas hoy</p>
                            ) : (
                                <div className="space-y-2 max-h-40 overflow-y-auto">
                                    {ventas.slice(-5).reverse().map(venta => (
                                        <div key={venta.id} className="flex justify-between items-center p-3 border-b border-gray-100">
                                            <div>
                                                <span className="font-semibold">{venta.cantidad}x {venta.producto}</span>
                                                <p className="text-xs text-gray-500">{new Date(venta.fecha).toLocaleTimeString('es-MX')}</p>
                                            </div>
                                            <span className="font-bold text-green-600">${(venta.cantidad * venta.precio).toFixed(2)}</span>
                                        </div>
                                    ))}
                                    {ventas.length > 5 && (
                                        <p className="text-center text-sm text-gray-500 pt-2">
                                            Mostrando las √∫ltimas 5 ventas de {ventas.length} totales
                                        </p>
                                    )}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );

            // Pantalla de Inventario
            const InventarioScreen = () => (
                <div className="min-h-screen bg-blue-50 p-4">
                    <div className="max-w-md mx-auto">
                        <HeaderNav 
                            title="üì¶ Mi Inventario" 
                            onBack={() => setCurrentView('main')}
                        >
                            <button
                                onClick={() => setMostrarFormulario(true)}
                                className="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-xl font-semibold flex items-center space-x-2"
                            >
                                <span>‚ûï</span>
                                <span>Nuevo</span>
                            </button>
                        </HeaderNav>

                        <div className="space-y-4">
                            {inventario.map(producto => {
                                const dias = getDiasVencimiento(producto.vencimiento);
                                const stockBajo = producto.cantidad <= producto.minimo;
                                
                                return (
                                    <div key={producto.id} className="bg-white rounded-2xl p-4 shadow-lg">
                                        <div className="flex justify-between items-start mb-3">
                                            <h3 className="text-lg font-bold text-gray-800 flex-1">{producto.nombre}</h3>
                                            <div className="flex flex-col items-end space-y-1">
                                                <span className={`px-3 py-1 rounded-full text-sm font-bold ${getColorVencimiento(dias)}`}>
                                                    {dias > 0 ? `${dias} d√≠as` : 'Vencido'}
                                                </span>
                                                {stockBajo && (
                                                    <span className="px-2 py-1 bg-red-500 text-white text-xs rounded-full">
                                                        ¬°Stock bajo!
                                                    </span>
                                                )}
                                            </div>
                                        </div>
                                        
                                        <div className="grid grid-cols-3 gap-4 text-center">
                                            <div>
                                                <p className="text-gray-600 text-sm">Cantidad</p>
                                                <p className={`text-2xl font-bold ${stockBajo ? 'text-red-600' : 'text-blue-600'}`}>
                                                    {producto.cantidad}
                                                </p>
                                            </div>
                                            <div>
                                                <p className="text-gray-600 text-sm">Precio</p>
                                                <p className="text-2xl font-bold text-green-600">${producto.precio}</p>
                                            </div>
                                            <div>
                                                <p className="text-gray-600 text-sm">Ganancia</p>
                                                <p className="text-xl font-bold text-purple-600">
                                                    ${(producto.precio - producto.costo).toFixed(2)}
                                                </p>
                                            </div>
                                        </div>

                                        {dias <= 15 && dias > 0 && (
                                            <div className="mt-3 p-3 bg-yellow-100 rounded-lg">
                                                <p className="text-yellow-800 text-sm font-semibold">
                                                    ‚ö†Ô∏è ¬°Pr√≥ximo a vencer! Considera hacer promoci√≥n 2√ó1 o descuento
                                                </p>
                                            </div>
                                        )}
                                        
                                        {dias <= 0 && (
                                            <div className="mt-3 p-3 bg-red-100 rounded-lg">
                                                <p className="text-red-800 text-sm font-semibold">
                                                    üö® ¬°Producto vencido! Retira inmediatamente de la venta
                                                </p>
                                            </div>
                                        )}

                                        {stockBajo && dias > 15 && (
                                            <div className="mt-3 p-3 bg-orange-100 rounded-lg">
                                                <p className="text-orange-800 text-sm font-semibold">
                                                    üì¶ Stock bajo: Solo quedan {producto.cantidad} unidades. ¬°Hora de reabastecer!
                                                </p>
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>

                        {mostrarFormulario && (
                            <FormularioProducto 
                                onCerrar={() => setMostrarFormulario(false)}
                                onGuardar={agregarProducto}
                            />
                        )}

                        <div className="mt-6 bg-green-100 rounded-2xl p-4">
                            <h3 className="font-bold text-green-800 mb-2">üí° Tip de Do√±a Carmen:</h3>
                            <p className="text-green-700 text-sm">
                                "Mija, revisa tu inventario todas las ma√±anas. Los productos frescos y bien organizados 
                                atraen m√°s clientes. ¬°Y no olvides rotar tu mercanc√≠a!"
                            </p>
                        </div>
                    </div>
                </div>
            );

            // Pantalla de Compras
            const ComprasScreen = () => {
                const productosPocos = inventario.filter(p => p.cantidad <= p.minimo);
                const productosVencer = inventario.filter(p => getDiasVencimiento(p.vencimiento) <= 15 && getDiasVencimiento(p.vencimiento) > 0);
                const productosAgotados = inventario.filter(p => p.cantidad === 0);

                return (
                    <div className="min-h-screen bg-purple-50 p-4">
                        <div className="max-w-md mx-auto">
                            <HeaderNav 
                                title="üìã ¬øQu√© debo comprar?" 
                                onBack={() => setCurrentView('main')}
                            >
                                <button
                                    onClick={() => setMostrarFormulario(true)}
                                    className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl font-semibold flex items-center space-x-2"
                                >
                                    <span>‚ûï</span>
                                    <span>Nuevo</span>
                                </button>
                            </HeaderNav>

                            <div className="space-y-6">
                                {/* Productos agotados - Prioridad m√°xima */}
                                {productosAgotados.length > 0 && (
                                    <div className="bg-white rounded-2xl p-6 shadow-lg border-2 border-red-400">
                                        <h3 className="text-xl font-bold text-red-600 mb-4 flex items-center">
                                            üö® URGENTE: Productos agotados
                                        </h3>
                                        <div className="space-y-3">
                                            {productosAgotados.map(producto => (
                                                <div key={producto.id} className="flex justify-between items-center p-3 bg-red-50 rounded-lg border border-red-200">
                                                    <div>
                                                        <p className="font-semibold text-gray-800">{producto.nombre}</p>
                                                        <p className="text-sm text-red-600 font-semibold">¬°AGOTADO!</p>
                                                    </div>
                                                    <span className="bg-red-500 text-white px-4 py-2 rounded-full text-sm font-bold">
                                                        COMPRAR YA
                                                    </span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                <div className="bg-white rounded-2xl p-6 shadow-lg">
                                    <h3 className="text-xl font-bold text-orange-600 mb-4 flex items-center">
                                        üì¶ Stock bajo
                                    </h3>
                                    {productosPocos.length === 0 ? (
                                        <div className="text-center py-4">
                                            <div className="text-4xl mb-2">‚úÖ</div>
                                            <p className="text-green-600 font-semibold">¬°Perfecto! Todos tus productos tienen buen stock</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-3">
                                            {productosPocos.map(producto => (
                                                <div key={producto.id} className="flex justify-between items-center p-3 bg-orange-50 rounded-lg">
                                                    <div>
                                                        <p className="font-semibold text-gray-800">{producto.nombre}</p>
                                                        <p className="text-sm text-gray-600">
                                                            Solo quedan {producto.cantidad} | M√≠nimo recomendado: {producto.minimo}
                                                        </p>
                                                    </div>
                                                    <span className="bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                                        ¬°Comprar!
                                                    </span>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                <div className="bg-white rounded-2xl p-6 shadow-lg">
                                    <h3 className="text-xl font-bold text-yellow-600 mb-4 flex items-center">
                                        ‚è∞ Pr√≥ximos a vencer
                                    </h3>
                                    {productosVencer.length === 0 ? (
                                        <div className="text-center py-4">
                                            <div className="text-4xl mb-2">‚úÖ</div>
                                            <p className="text-green-600 font-semibold">¬°Excelente! No tienes productos pr√≥ximos a vencer</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-3">
                                            {productosVencer.map(producto => (
                                                <div key={producto.id} className="flex justify-between items-center p-3 bg-yellow-50 rounded-lg">
                                                    <div>
                                                        <p className="font-semibold text-gray-800">{producto.nombre}</p>
                                                        <p className="text-sm text-gray-600">Vence en {getDiasVencimiento(producto.vencimiento)} d√≠as</p>
                                                    </div>
                                                    <span className="bg-yellow-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                                        ¬°Promoci√≥n!
                                                    </span>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                <div className="bg-blue-100 rounded-2xl p-6 shadow-lg">
                                <h3 className="text-lg font-bold text-blue-800 mb-2">üí∞ Consejo de Do√±a Carmen:</h3>
                                <p className="text-blue-700 text-sm mb-3">
                                    "Mija, para productos que se venden mucho como refrescos y pan, 
                                    30-50% de ganancia est√° perfecto. Para productos especiales o de temporada, 
                                    ¬°puedes ganar hasta 100%!"
                                </p>
                                <div className="bg-white rounded-lg p-3 mt-3">
                                    <p className="text-xs text-gray-600 font-semibold">M√°rgenes recomendados:</p>
                                    <ul className="text-xs text-gray-600 mt-1 space-y-1">
                                        <li>‚Ä¢ Productos b√°sicos: 30-50%</li>
                                        <li>‚Ä¢ Botanas y dulces: 40-60%</li>
                                        <li>‚Ä¢ Productos especiales: 50-100%</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Renderizar la pantalla actual
            const renderCurrentView = () => {
                if (cargando) {
                    return <PantallaCarga />;
                }

                switch (currentView) {
                    case 'ventas':
                        return <VentasScreen />;
                    case 'inventario':
                        return <InventarioScreen />;
                    case 'compras':
                        return <ComprasScreen />;
                    case 'dinero':
                        return <DineroScreen />;
                    case 'historico':
                        return <HistoricoScreen />;
                    default:
                        return <MainScreen />;
                }
            };

            return renderCurrentView();
        };

        ReactDOM.render(<TiendaApp />, document.getElementById('root'));
    </script>
</body>
</html>shadow-lg">
                                    <h3 className="text-lg font-bold text-blue-800 mb-3">üìù Lista de Compras Sugerida</h3>
                                    <div className="space-y-2">
                                        <p className="text-blue-700 font-semibold">Productos b√°sicos recomendados:</p>
                                        <ul className="text-blue-600 text-sm space-y-1 ml-4">
                                            <li>‚Ä¢ Refrescos (Coca-Cola, Pepsi)</li>
                                            <li>‚Ä¢ Pan de caja y dulces</li>
                                            <li>‚Ä¢ Leche y huevos</li>
                                            <li>‚Ä¢ Botanas (Sabritas, Doritos)</li>
                                            <li>‚Ä¢ Productos de limpieza b√°sicos</li>
                                        </ul>
                                    </div>
                                </div>

                                <div className="bg-green-100 rounded-2xl p-6 shadow-lg">
                                    <h3 className="text-lg font-bold text-green-800 mb-2">üí° Consejo de Do√±a Carmen:</h3>
                                    <p className="text-green-700">
                                        "Mija, siempre compra un poquito m√°s de lo que crees que necesitas. 
                                        Es mejor tener de sobra que quedarse sin vender. ¬°Y no olvides negociar 
                                        mejores precios cuando compres por mayoreo!"
                                    </p>
                                </div>
                            </div>

                            {mostrarFormulario && (
                                <FormularioProducto 
                                    onCerrar={() => setMostrarFormulario(false)}
                                    onGuardar={agregarProducto}
                                />
                            )}
                        </div>
                    </div>
                );
            };

            // Pantalla de Dinero
            const DineroScreen = () => (
                <div className="min-h-screen bg-yellow-50 p-4">
                    <div className="max-w-md mx-auto">
                        <HeaderNav title="üí∞ Mi Dinero del D√≠a" onBack={() => setCurrentView('main')} />

                        <div className="space-y-6">
                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <h3 className="text-xl font-bold text-gray-800 mb-4">üìä Resumen de Hoy</h3>
                                <div className="grid grid-cols-2 gap-4 mb-4">
                                    <div className="text-center p-3 bg-green-50 rounded-lg">
                                        <p className="text-sm text-gray-600">Total Vendido</p>
                                        <p className="text-2xl font-bold text-green-600">${totalVentasHoy.toFixed(2)}</p>
                                    </div>
                                    <div className="text-center p-3 bg-blue-50 rounded-lg">
                                        <p className="text-sm text-gray-600">Ganancias</p>
                                        <p className="text-2xl font-bold text-blue-600">${gananciasHoy.toFixed(2)}</p>
                                    </div>
                                </div>
                                
                                <div className="grid grid-cols-2 gap-4">
                                    <div className="text-center p-3 bg-purple-50 rounded-lg">
                                        <p className="text-sm text-gray-600">Ventas</p>
                                        <p className="text-xl font-semibold text-purple-600">{ventas.length}</p>
                                    </div>
                                    <div className="text-center p-3 bg-orange-50 rounded-lg">
                                        <p className="text-sm text-gray-600">Margen Promedio</p>
                                        <p className="text-xl font-semibold text-orange-600">
                                            {totalVentasHoy > 0 ? `${((gananciasHoy / totalVentasHoy) * 100).toFixed(1)}%` : '0%'}
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <h3 className="text-xl font-bold text-gray-800 mb-4">üßÆ Calculadora de Ganancias</h3>
                                
                                <div className="space-y-4">
                                    <div>
                                        <label className="text-lg font-semibold text-gray-700 mb-2 block">¬øCu√°nto te cost√≥?</label>
                                        <div className="relative">
                                            <span className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-xl">$</span>
                                            <input
                                                type="number"
                                                value={calculadora.costo}
                                                onChange={(e) => setCalculadora({...calculadora, costo: e.target.value})}
                                                className="w-full pl-8 pr-4 py-4 text-xl border-2 border-gray-300 rounded-xl focus:border-yellow-500"
                                                placeholder="15.00"
                                            />
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label className="text-lg font-semibold text-gray-700 mb-2 block">¬øA cu√°nto lo vendes?</label>
                                        <div className="relative">
                                            <span className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-xl">$</span>
                                            <input
                                                type="number"
                                                value={calculadora.precio}
                                                onChange={(e) => setCalculadora({...calculadora, precio: e.target.value})}
                                                className="w-full pl-8 pr-4 py-4 text-xl border-2 border-gray-300 rounded-xl focus:border-yellow-500"
                                                placeholder="25.00"
                                            />
                                        </div>
                                    </div>

                                    {calculadora.costo && calculadora.precio && (
                                        <div className="bg-gradient-to-r from-green-100 to-blue-100 rounded-xl p-6 border-2 border-green-300">
                                            <div className="text-center mb-4">
                                                <h4 className="text-lg font-bold text-gray-800 mb-2">üí∞ Tu ganancia por unidad:</h4>
                                                <p className="text-4xl font-bold text-green-600">
                                                    ${(parseFloat(calculadora.precio) - parseFloat(calculadora.costo)).toFixed(2)}
                                                </p>
                                            </div>
                                            
                                            <div className="grid grid-cols-2 gap-4 text-center">
                                                <div>
                                                    <p className="text-sm text-gray-600">Margen de ganancia</p>
                                                    <p className="text-xl font-bold text-blue-600">
                                                        {(((parseFloat(calculadora.precio) - parseFloat(calculadora.costo)) / parseFloat(calculadora.precio)) * 100).toFixed(1)}%
                                                    </p>
                                                </div>
                                                <div>
                                                    <p className="text-sm text-gray-600">Multiplicador</p>
                                                    <p className="text-xl font-bold text-purple-600">
                                                        {(parseFloat(calculadora.precio) / parseFloat(calculadora.costo)).toFixed(1)}x
                                                    </p>
                                                </div>
                                            </div>

                                            {/* Recomendaciones de precio */}
                                            <div className="mt-4 p-3 bg-white rounded-lg">
                                                <p className="text-sm font-semibold text-gray-700 mb-2">üìà An√°lisis del margen:</p>
                                                {(() => {
                                                    const margen = ((parseFloat(calculadora.precio) - parseFloat(calculadora.costo)) / parseFloat(calculadora.precio)) * 100;
                                                    if (margen < 20) {
                                                        return <p className="text-red-600 text-sm">‚ö†Ô∏è Margen muy bajo. Considera aumentar el precio.</p>;
                                                    } else if (margen < 40) {
                                                        return <p className="text-yellow-600 text-sm">‚úÖ Margen aceptable para productos b√°sicos.</p>;
                                                    } else if (margen < 60) {
                                                        return <p className="text-green-600 text-sm">üéØ ¬°Excelente margen! Muy buena ganancia.</p>;
                                                    } else {
                                                        return <p className="text-blue-600 text-sm">üíé Margen premium. Perfecto para productos especiales.</p>;
                                                    }
                                                })()}
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Proyecciones r√°pidas */}
                            {calculadora.costo && calculadora.precio && (
                                <div className="bg-white rounded-2xl p-6 shadow-lg">
                                    <h3 className="text-lg font-bold text-gray-800 mb-4">üéØ Si vendes...</h3>
                                    <div className="space-y-3">
                                        {[10, 50, 100].map(cantidad => (
                                            <div key={cantidad} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                                <span className="font-semibold">{cantidad} unidades:</span>
                                                <div className="text-right">
                                                    <p className="font-bold text-green-600">
                                                        ${(cantidad * parseFloat(calculadora.precio)).toFixed(2)} ventas
                                                    </p>
                                                    <p className="text-sm text-blue-600">
                                                        ${(cantidad * (parseFloat(calculadora.precio) - parseFloat(calculadora.costo))).toFixed(2)} ganancia
                                                    </p>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            <div className="bg-blue-100 rounded-2xl p-6 <!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Tiendita</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: #F3F4F6;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const TiendaApp = () => {
            const [currentView, setCurrentView] = useState('main');
            const [ventas, setVentas] = useState([]);
            const [inventario, setInventario] = useState([
                { id: 1, nombre: 'Coca-Cola 600ml', cantidad: 24, costo: 12, precio: 18, vencimiento: '2025-08-15', minimo: 10 },
                { id: 2, nombre: 'Sabritas Original', cantidad: 15, costo: 8, precio: 15, vencimiento: '2025-07-20', minimo: 5 },
                { id: 3, nombre: 'Pan Bimbo Grande', cantidad: 8, costo: 25, precio: 35, vencimiento: '2025-06-25', minimo: 6 },
                { id: 4, nombre: 'Leche Lala 1L', cantidad: 12, costo: 18, precio: 25, vencimiento: '2025-06-20', minimo: 8 },
                { id: 5, nombre: 'Huevos San Juan', cantidad: 30, costo: 35, precio: 50, vencimiento: '2025-07-01', minimo: 12 }
            ]);
            const [ventaActual, setVentaActual] = useState({ producto: '', cantidad: 1, precio: 0 });
            const [calculadora, setCalculadora] = useState({ costo: '', precio: '' });
            const [nuevoProducto, setNuevoProducto] = useState({ 
                nombre: '', 
                cantidad: '', 
                costo: '', 
                precio: '', 
                vencimiento: '',
                minimo: ''
            });
            const [mostrarFormulario, setMostrarFormulario] = useState(false);
            
            // Estados para persistencia
            const [fechaActual, setFechaActual] = useState(new Date().toDateString());
            const [cargando, setCargando] = useState(true);
            const [ultimaActualizacion, setUltimaActualizacion] = useState('');

            // Inventario por defecto
            const inventarioDefecto = [
                { id: 1, nombre: 'Coca-Cola 600ml', cantidad: 24, costo: 12, precio: 18, vencimiento: '2025-08-15', minimo: 10 },
                { id: 2, nombre: 'Sabritas Original', cantidad: 15, costo: 8, precio: 15, vencimiento: '2025-07-20', minimo: 5 },
                { id: 3, nombre: 'Pan Bimbo Grande', cantidad: 8, costo: 25, precio: 35, vencimiento: '2025-06-25', minimo: 6 },
                { id: 4, nombre: 'Leche Lala 1L', cantidad: 12, costo: 18, precio: 25, vencimiento: '2025-06-20', minimo: 8 },
                { id: 5, nombre: 'Huevos San Juan', cantidad: 30, costo: 35, precio: 50, vencimiento: '2025-07-01', minimo: 12 }
            ];

            // Funci√≥n para obtener la fecha actual
            const obtenerFechaHoy = () => {
                return new Date().toDateString();
            };

            // Funci√≥n para cargar datos del d√≠a
            const cargarDatosDelDia = () => {
                const hoy = obtenerFechaHoy();
                
                try {
                    const datosGuardadosStr = localStorage.getItem('miTiendita_datos');
                    
                    if (datosGuardadosStr) {
                        const datosGuardados = JSON.parse(datosGuardadosStr);
                        
                        // Si es el mismo d√≠a, cargar datos
                        if (datosGuardados.fecha === hoy) {
                            setVentas(datosGuardados.ventas || []);
                            setInventario(datosGuardados.inventario || inventarioDefecto);
                            setUltimaActualizacion(datosGuardados.ultimaActualizacion || '');
                            console.log('‚úÖ Datos del d√≠a cargados');
                        } else {
                            // Si es nuevo d√≠a, guardar d√≠a anterior en hist√≥rico y empezar nuevo
                            guardarDiaEnHistorico(datosGuardados);
                            iniciarNuevoDia();
                            console.log('üåÖ Nuevo d√≠a iniciado - D√≠a anterior guardado en hist√≥rico');
                        }
                    } else {
                        iniciarNuevoDia();
                        console.log('üÜï Primera vez usando la app');
                    }
                } catch (error) {
                    console.log('‚ùå Error cargando datos, iniciando nuevo d√≠a');
                    iniciarNuevoDia();
                }
                
                setFechaActual(hoy);
                setCargando(false);
            };

            // Funci√≥n para guardar d√≠a en hist√≥rico
            const guardarDiaEnHistorico = (datosDelDia) => {
                if (datosDelDia.ventas && datosDelDia.ventas.length > 0) {
                    try {
                        const historico = JSON.parse(localStorage.getItem('miTiendita_historico') || '[]');
                        
                        // Calcular resumen del d√≠a
                        const totalVentas = datosDelDia.ventas.reduce((total, venta) => total + (venta.cantidad * venta.precio), 0);
                        const totalCostos = datosDelDia.ventas.reduce((total, venta) => {
                            const producto = datosDelDia.inventario?.find(p => p.nombre === venta.producto);
                            return total + (venta.cantidad * (producto?.costo || 0));
                        }, 0);
                        
                        const resumenDia = {
                            fecha: datosDelDia.fecha,
                            fechaLegible: new Date(datosDelDia.fecha).toLocaleDateString('es-MX', { 
                                weekday: 'long', 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            }),
                            totalVentas: totalVentas,
                            totalCostos: totalCostos,
                            ganancias: totalVentas - totalCostos,
                            numeroVentas: datosDelDia.ventas.length,
                            ventas: datosDelDia.ventas,
                            productosVendidos: datosDelDia.ventas.reduce((acc, venta) => {
                                acc[venta.producto] = (acc[venta.producto] || 0) + venta.cantidad;
                                return acc;
                            }, {}),
                            guardadoEn: new Date().toISOString()
                        };
                        
                        // Agregar al hist√≥rico (m√°ximo √∫ltimos 30 d√≠as)
                        historico.unshift(resumenDia);
                        if (historico.length > 30) {
                            historico.splice(30);
                        }
                        
                        localStorage.setItem('miTiendita_historico', JSON.stringify(historico));
                        console.log('üíæ D√≠a anterior guardado en hist√≥rico:', resumenDia.fechaLegible);
                    } catch (error) {
                        console.log('‚ùå Error guardando en hist√≥rico:', error);
                    }
                }
            };

            // Funci√≥n para iniciar nuevo d√≠a
            const iniciarNuevoDia = () => {
                const hoy = obtenerFechaHoy();
                setFechaActual(hoy);
                setVentas([]);
                setUltimaActualizacion('');
                // El inventario se mantiene, solo se resetean las ventas
                console.log('üåÖ Nuevo d√≠a iniciado:', new Date(hoy).toLocaleDateString('es-MX'));
            };

            // Funci√≥n para guardar datos autom√°ticamente
            const guardarDatos = () => {
                if (!cargando) {
                    const datosDelDia = {
                        fecha: obtenerFechaHoy(),
                        ventas: ventas,
                        inventario: inventario,
                        ultimaActualizacion: new Date().toISOString()
                    };
                    
                    try {
                        localStorage.setItem('miTiendita_datos', JSON.stringify(datosDelDia));
                        setUltimaActualizacion(datosDelDia.ultimaActualizacion);
                        console.log('üíæ Datos guardados autom√°ticamente');
                    } catch (error) {
                        console.log('‚ùå Error guardando datos:', error);
                    }
                }
            };

            // Funci√≥n para limpiar todos los datos
            const limpiarTodosLosDatos = () => {
                if (window.confirm('¬øEst√°s seguro? Se borrar√°n TODOS los datos incluyendo el hist√≥rico.')) {
                    try {
                        localStorage.removeItem('miTiendita_datos');
                        localStorage.removeItem('miTiendita_historico');
                        setVentas([]);
                        setInventario(inventarioDefecto);
                        setUltimaActualizacion('');
                        alert('‚úÖ Todos los datos han sido eliminados');
                        console.log('üóëÔ∏è Todos los datos eliminados');
                    } catch (error) {
                        console.log('‚ùå Error eliminando datos:', error);
                    }
                }
            };

            // USEEFFECT PARA CARGAR DATOS AL INICIO
            useEffect(() => {
                cargarDatosDelDia();
            }, []);

            // USEEFFECT PARA GUARDAR DATOS AUTOM√ÅTICAMENTE
            useEffect(() => {
                guardarDatos();
            }, [ventas, inventario]);

            // USEEFFECT PARA VERIFICAR CAMBIO DE D√çA
            useEffect(() => {
                const verificarCambioDia = () => {
                    const hoy = obtenerFechaHoy();
                    if (hoy !== fechaActual) {
                        console.log('üìÖ Detectado cambio de d√≠a');
                        cargarDatosDelDia();
                    }
                };

                // Verificar cada minuto si cambi√≥ el d√≠a
                const intervalo = setInterval(verificarCambioDia, 60000);
                
                return () => clearInterval(intervalo);
            }, [fechaActual]);

            // Funciones auxiliares
            const getDiasVencimiento = (fecha) => {
                const hoy = new Date();
                const vencimiento = new Date(fecha);
                const diferencia = Math.ceil((vencimiento - hoy) / (1000 * 60 * 60 * 24));
                return diferencia;
            };

            const getColorVencimiento = (dias) => {
                if (dias > 30) return 'bg-green-100 text-green-800';
                if (dias > 15) return 'bg-yellow-100 text-yellow-800';
                return 'bg-red-100 text-red-800';
            };

            const agregarProducto = () => {
                if (nuevoProducto.nombre && nuevoProducto.cantidad && nuevoProducto.precio) {
                    const producto = {
                        id: Date.now(),
                        nombre: nuevoProducto.nombre,
                        cantidad: parseInt(nuevoProducto.cantidad),
                        costo: parseFloat(nuevoProducto.costo) || 0,
                        precio: parseFloat(nuevoProducto.precio),
                        vencimiento: nuevoProducto.vencimiento || '2025-12-31',
                        minimo: parseInt(nuevoProducto.minimo) || 5
                    };
                    setInventario([...inventario, producto]);
                    setNuevoProducto({ nombre: '', cantidad: '', costo: '', precio: '', vencimiento: '', minimo: '' });
                    setMostrarFormulario(false);
                    alert('¬°Producto agregado exitosamente! üéâ');
                } else {
                    alert('Por favor completa al menos: nombre, cantidad y precio');
                }
            };

            const totalVentasHoy = ventas.reduce((total, venta) => total + (venta.cantidad * venta.precio), 0);
            const totalCostosHoy = ventas.reduce((total, venta) => {
                const producto = inventario.find(p => p.nombre === venta.producto);
                return total + (venta.cantidad * (producto?.costo || 0));
            }, 0);
            const gananciasHoy = totalVentasHoy - totalCostosHoy;

            // Componente de navegaci√≥n
            const HeaderNav = ({ title, onBack, children }) => (
                <div className="flex items-center justify-between mb-6 bg-white p-4 rounded-2xl shadow-lg">
                    <div className="flex items-center">
                        <button
                            onClick={onBack}
                            className="bg-gray-600 hover:bg-gray-700 text-white p-3 rounded-full mr-4"
                        >
                            ‚Üê
                        </button>
                        <h1 className="text-2xl font-bold text-gray-900">{title}</h1>
                    </div>
                    {children}
                </div>
            );

            // Componente de carga
            const PantallaCarga = () => (
                <div className="min-h-screen bg-blue-50 flex items-center justify-center">
                    <div className="text-center">
                        <div className="text-6xl mb-4">üè™</div>
                        <h2 className="text-2xl font-bold text-blue-900 mb-2">Mi Tiendita</h2>
                        <p className="text-blue-700">Cargando tus datos...</p>
                        <div className="mt-4 w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto"></div>
                    </div>
                </div>
            );

            // Componente de formulario para nuevo producto
            const FormularioProducto = ({ onCerrar, onGuardar }) => (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl p-6 max-w-sm w-full max-h-96 overflow-y-auto">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold text-gray-800">‚ûï Nuevo Producto</h3>
                            <button onClick={onCerrar} className="text-gray-500 hover:text-gray-700 text-2xl">√ó</button>
                        </div>
                        
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-1">Nombre del producto *</label>
                                <input
                                    type="text"
                                    value={nuevoProducto.nombre}
                                    onChange={(e) => setNuevoProducto({...nuevoProducto, nombre: e.target.value})}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500"
                                    placeholder="Ej: Coca-Cola 600ml"
                                />
                            </div>
                            
                            <div className="grid grid-cols-2 gap-3">
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-1">Cantidad *</label>
                                    <input
                                        type="number"
                                        value={nuevoProducto.cantidad}
                                        onChange={(e) => setNuevoProducto({...nuevoProducto, cantidad: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500"
                                        placeholder="24"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-1">Precio *</label>
                                    <input
                                        type="number"
                                        value={nuevoProducto.precio}
                                        onChange={(e) => setNuevoProducto({...nuevoProducto, precio: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500"
                                        placeholder="18"
                                    />
                                </div>
                            </div>
                            
                            <div className="grid grid-cols-2 gap-3">
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-1">Costo</label>
                                    <input
                                        type="number"
                                        value={nuevoProducto.costo}
                                        onChange={(e) => setNuevoProducto({...nuevoProducto, costo: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500"
                                        placeholder="12"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-1">Stock m√≠nimo</label>
                                    <input
                                        type="number"
                                        value={nuevoProducto.minimo}
                                        onChange={(e) => setNuevoProducto({...nuevoProducto, minimo: e.target.value})}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500"
                                        placeholder="5"
                                    />
                                </div>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-1">Fecha de vencimiento</label>
                                <input
                                    type="date"
                                    value={nuevoProducto.vencimiento}
                                    onChange={(e) => setNuevoProducto({...nuevoProducto, vencimiento: e.target.value})}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-500"
                                />
                            </div>
                        </div>
                        
                        <div className="flex space-x-3 mt-6">
                            <button
                                onClick={onGuardar}
                                className="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-semibold"
                            >
                                üíæ Guardar Producto
                            </button>
                            <button
                                onClick={onCerrar}
                                className="px-4 py-3 bg-gray-200 hover:bg-gray-300 rounded-xl"
                            >
                                Cancelar
                            </button>
                        </div>
                    </div>
                </div>
            );

            // Pantalla de Hist√≥rico
            const HistoricoScreen = () => {
                const [historico, setHistorico] = useState([]);
                
                useEffect(() => {
                    try {
                        const datos = JSON.parse(localStorage.getItem('miTiendita_historico') || '[]');
                        setHistorico(datos);
                    } catch (error) {
                        console.log('‚ùå Error cargando hist√≥rico:', error);
                        setHistorico([]);
                    }
                }, []);
                
                return (
                    <div className="min-h-screen bg-gray-50 p-4">
                        <div className="max-w-md mx-auto">
                            <HeaderNav title="üìä Historial de D√≠as" onBack={() => setCurrentView('main')} />
                            
                            <div className="space-y-4">
                                {historico.length === 0 ? (
                                    <div className="text-center py-8">
                                        <div className="text-6xl mb-4">üìà</div>
                                        <h3 className="text-xl font-bold text-gray-800 mb-2">Sin historial a√∫n</h3>
                                        <p className="text-gray-600">
                                            Aqu√≠ aparecer√°n los res√∫menes de tus d√≠as anteriores.
                                            ¬°Sigue vendiendo para crear tu primer d√≠a en el historial!
                                        </p>
                                    </div>
                                ) : (
                                    <>
                                        <div className="bg-blue-100 rounded-2xl p-4 mb-4">
                                            <h3 className="font-bold text-blue-800 mb-2">üìä Resumen General</h3>
                                            <div className="grid grid-cols-3 gap-4 text-center">
                                                <div>
                                                    <p className="text-sm text-blue-600">D√≠as registrados</p>
                                                    <p className="text-xl font-bold text-blue-800">{historico.length}</p>
                                                </div>
                                                <div>
                                                    <p className="text-sm text-blue-600">Total acumulado</p>
                                                    <p className="text-xl font-bold text-green-600">
                                                        ${historico.reduce((total, dia) => total + dia.totalVentas, 0).toFixed(2)}
                                                    </p>
                                                </div>
                                                <div>
                                                    <p className="text-sm text-blue-600">Promedio diario</p>
                                                    <p className="text-xl font-bold text-purple-600">
                                                        ${(historico.reduce((total, dia) => total + dia.totalVentas, 0) / historico.length).toFixed(2)}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        {historico.map((dia, index) => {
                                            const productoMasVendido = Object.entries(dia.productosVendidos).sort((a, b) => b[1] - a[1])[0];
                                            
                                            return (
                                                <div key={index} className="bg-white rounded-2xl p-4 shadow-lg">
                                                    <div className="flex justify-between items-center mb-3">
                                                        <h3 className="font-bold text-gray-800 text-lg">
                                                            {dia.fechaLegible}
                                                        </h3>
                                                        <span className="text-sm bg-gray-100 text-gray-600 px-2 py-1 rounded-full">
                                                            {index === 0 ? 'Ayer' : `Hace ${index + 1} d√≠as`}
                                                        </span>
                                                    </div>
                                                    
                                                    <div className="grid grid-cols-3 gap-4 mb-3">
                                                        <div className="text-center">
                                                            <p className="text-sm text-gray-600">Vendido</p>
                                                            <p className="text-lg font-bold text-green-600">${dia.totalVentas.toFixed(2)}</p>
                                                        </div>
                                                        <div className="text-center">
                                                            <p className="text-sm text-gray-600">Ganancia</p>
                                                            <p className="text-lg font-bold text-blue-600">${dia.ganancias.toFixed(2)}</p>
                                                        </div>
                                                        <div className="text-center">
                                                            <p className="text-sm text-gray-600">Ventas</p>
                                                            <p className="text-lg font-bold text-purple-600">{dia.numeroVentas}</p>
                                                        </div>
                                                    </div>

                                                    {productoMasVendido && (
                                                        <div className="bg-yellow-50 rounded-lg p-3">
                                                            <p className="text-sm text-yellow-800">
                                                                <span className="font-semibold">üèÜ Producto estrella:</span> {productoMasVendido[0]} ({productoMasVendido[1]} vendidos)
                                                            </p>
                                                        </div>
                                                    )}
                                                </div>
                                            );
                                        })}
                                    </>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            // Pantalla Principal
            const MainScreen = () => (
                <div className="min-h-screen bg-blue-50 p-4">
                    <div className="max-w-md mx-auto">
                        <div className="text-center mb-8">
                            <h1 className="text-3xl font-bold text-blue-900 mb-2">üè™ Mi Tiendita</h1>
                            <p className="text-lg text-blue-700">¬°Bienvenido! ¬øQu√© vamos a hacer hoy?</p>
                            {ultimaActualizacion && (
                                <p className="text-sm text-blue-600 mt-2">
                                    √öltimo guardado: {new Date(ultimaActualizacion).toLocaleTimeString('es-MX')}
                                </p>
                            )}
                        </div>

                        <div className="space-y-6">
                            <button
                                onClick={() => setCurrentView('ventas')}
                                className="w-full bg-green-600 hover:bg-green-700 text-white p-6 rounded-2xl shadow-xl flex items-center justify-center space-x-4 transform hover:scale-105 transition-all"
                            >
                                <span className="text-4xl">üõí</span>
                                <span className="text-2xl font-bold">Registrar Venta</span>
                            </button>

                            <button
                                onClick={() => setCurrentView('inventario')}
                                className="w-full bg-blue-600 hover:bg-blue-700 text-white p-6 rounded-2xl shadow-xl flex items-center justify-center space-x-4 transform hover:scale-105 transition-all"
                            >
                                <span className="text-4xl">üì¶</span>
                                <span className="text-2xl font-bold">Ver mi Inventario</span>
                            </button>

                            <button
                                onClick={() => setCurrentView('compras')}
                                className="w-full bg-purple-600 hover:bg-purple-700 text-white p-6 rounded-2xl shadow-xl flex items-center justify-center space-x-4 transform hover:scale-105 transition-all"
                            >
                                <span className="text-4xl">üìã</span>
                                <span className="text-2xl font-bold">¬øQu√© debo comprar?</span>
                            </button>

                            <button
                                onClick={() => setCurrentView('dinero')}
                                className="w-full bg-yellow-600 hover:bg-yellow-700 text-white p-6 rounded-2xl shadow-xl flex items-center justify-center space-x-4 transform hover:scale-105 transition-all"
                            >
                                <span className="text-4xl">üí∞</span>
                                <span className="text-2xl font-bold">Mi Dinero del D√≠a</span>
                            </button>

                            <button
                                onClick={() => setCurrentView('historico')}
                                className="w-full bg-gray-600 hover:bg-gray-700 text-white p-4 rounded-2xl shadow-lg flex items-center justify-center space-x-4 mt-4"
                            >
                                <span className="text-2xl">üìä</span>
                                <span className="text-lg font-bold">Ver D√≠as Anteriores</span>
                            </button>
                        </div>

                        <div className="mt-8 bg-white rounded-2xl p-4 shadow-lg">
                            <h3 className="text-xl font-bold text-gray-800 mb-3">üìä Resumen de Hoy</h3>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <p className="text-sm text-gray-600">Ventas</p>
                                    <p className="text-lg text-green-600 font-bold">${totalVentasHoy.toFixed(2)}</p>
                                </div>
                                <div>
                                    <p className="text-sm text-gray-600">Ganancias</p>
                                    <p className="text-lg text-blue-600 font-bold">${gananciasHoy.toFixed(2)}</p>
                                </div>
                            </div>
                            <p className="text-sm text-gray-600 mt-2">
                                Productos en inventario: {inventario.length} | Ventas: {ventas.length}
                            </p>
                            
                            {/* Bot√≥n para limpiar datos (oculto normalmente) */}
                            <button
                                onClick={limpiarTodosLosDatos}
